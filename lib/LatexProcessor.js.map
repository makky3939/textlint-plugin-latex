{"version":3,"sources":["../src/LatexProcessor.js"],"names":["module","exports","config","ext","preProcess","text","filePath","LatexProcessor","latexToPlainText","postProcess","messages","replace"],"mappings":"AAAA;;;;AAEA;;;;AAEA;;;;;;AAEAA,OAAOC,OAAP;AACE,0BAAYC,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACD;;AAHH;AAAA;AAAA,8BAqBYC,GArBZ,EAqBiB;AACb,aAAO;AACLC,kBADK,sBACMC,IADN,EACYC,QADZ,EACsB;AACzB,iBAAO,qBAAMC,eAAeC,gBAAf,CAAgCH,IAAhC,CAAN,CAAP;AACD,SAHI;AAILI,mBAJK,uBAIOC,QAJP,EAIiBJ,QAJjB,EAI2B;AAC9B,iBAAO;AACLI,8BADK;AAELJ,sBAAUA,WAAWA,QAAX,GAAsB;AAF3B,WAAP;AAID;AATI,OAAP;AAWD;AAjCH;AAAA;AAAA,0CAK+B;AAC3B,aAAO,CAAC,MAAD,CAAP;AACD;AAPH;AAAA;AAAA,qCAS0BD,IAT1B,EASgC;AAC5B,aAAOA,KACJM,OADI,CACI,UADJ,EACgB,EADhB,EAEJA,OAFI,CAEI,OAFJ,EAEa,EAFb,EAGJA,OAHI,CAGI,YAHJ,EAGkB,MAHlB,EAIJA,OAJI,CAII,WAJJ,EAIiB,EAJjB,EAKJA,OALI,CAKI,YALJ,EAKkB,IALlB,EAMJA,OANI,CAMI,iBANJ,EAMuB,IANvB,EAOJA,OAPI,CAOI,MAPJ,EAOY,GAPZ,EAQJA,OARI,CAQI,SARJ,EAQe,IARf,CAAP;AASD;AAnBH;;AAAA;AAAA","file":"LatexProcessor.js","sourcesContent":["\"use strict\";\n\nimport util from \"util\";\n\nimport { parse } from \"txt-to-ast\";\n\nmodule.exports = class LatexProcessor {\n  constructor(config) {\n    this.config = config;\n  }\n\n  static availableExtensions() {\n    return [\".tex\"];\n  }\n\n  static latexToPlainText(text) {\n    return text\n      .replace(/\\\\\\w+ */g, \"\")\n      .replace(/{+}+/g, \"\")\n      .replace(/{+(.*?)}+/g, \"「$1」\")\n      .replace(/^%[^\\n]*/g, \"\")\n      .replace(/\\n%[^\\n]*/g, \"\\n\")\n      .replace(/([^\\\\])%[^\\n]*/g, \"$1\")\n      .replace(/\\\\%/g, \"%\")\n      .replace(/ *\\n */g, \"\\n\");\n  }\n\n  processor(ext) {\n    return {\n      preProcess(text, filePath) {\n        return parse(LatexProcessor.latexToPlainText(text));\n      },\n      postProcess(messages, filePath) {\n        return {\n          messages,\n          filePath: filePath ? filePath : \"<latex>\"\n        };\n      }\n    };\n  }\n};\n"]}